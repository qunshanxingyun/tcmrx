# TCM-RX 双塔对比学习模型 - 默认配置
# 所有参数均可为空或关闭，null表示不启用

# 训练超参数
training:
  batch_size: 256
  epochs: 50
  lr: 0.0001
  weight_decay: 0.00001
  seed: 42
  device: "auto"  # auto, cpu, cuda
  mixed_precision: false
  eval_every: 5
  log_every: 100

# 模型超参数
model:
  embedding_dim: 256
  temperature: 0.1
  dropout_rate: 0.1
  aggregator_type: "attention"  # weighted_sum, attention
  tower_head:
    enabled: false
    share: true
    hidden_dims: [512]
    activation: "gelu"
    dropout: 0.1
    layer_norm: true
    residual: true

# 过滤和截断参数（可选，null表示不启用）
filtering:
  # Top-K截断（控制数据规模）
  topk_d: 1000      # 疾病侧靶点数量限制
  topk_f: 3000      # 方剂侧靶点数量限制
  topk_c: 15        # 每个化合物的靶点数量限制

  # SD1预测过滤
  pki_threshold: 6.0    # 预测亲和力阈值
  use_experimental_edges: true  # 优先使用实验边

  # 加权参数
  dosage_temperature: 1.0   # 剂量softmax温度
  inverse_freq_weight: true  # 逆频重加权

# 数据划分参数
split:
  train_ratio: 0.8
  val_ratio: 0.1
  test_ratio: 0.1
  # 冷启动评估：保留无分子信息的疾病
  cold_start_eval: true

# 日志和保存
logging:
  log_dir: "logs"
  checkpoint_dir: "checkpoints"
  experiment_name: null  # 自动生成
  save_best_only: true